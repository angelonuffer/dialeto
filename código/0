faixa = faixa.0
símbolo = símbolo.0
sequência = sequência.0
alternativa = alternativa.0
opcional = opcional.0
repetição = repetição.0

dialeto = {
  analisar_de: { entrada pos gramática } =>
    | (gramática.tipo == "faixa") = faixa.analisar({ entrada: entrada pos: pos gramática: gramática })
    | (gramática.tipo == "símbolo") = símbolo.analisar({ entrada: entrada pos: pos gramática: gramática })
    | (gramática.tipo == "sequência") = sequência.analisar({ entrada: entrada pos: pos gramática: gramática índice: 0 valores: [] analisar_de: dialeto.analisar_de })
    | (gramática.tipo == "alternativa") = alternativa.analisar({ entrada: entrada pos: pos gramática: gramática índice: 0 analisar_de: dialeto.analisar_de })
    | (gramática.tipo == "opcional") = opcional.analisar({ entrada: entrada pos: pos gramática: gramática analisar_de: dialeto.analisar_de })
    | (gramática.tipo == "repetição") = repetição.analisar({ entrada: entrada pos: pos gramática: gramática analisar_de: dialeto.analisar_de })
    | {
      sucesso: 0
      pos: pos
    }

  analisar: { entrada gramática } =>
    | (gramática.tipo == "faixa" & gramática.de <= entrada & gramática.até >= entrada) = {
      sucesso: 1
      valor: entrada
    }
    | (gramática.tipo == "faixa") = dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática })
    | (gramática.tipo == "símbolo" & gramática.texto == entrada) = {
      sucesso: 1
      valor: entrada
    }
    | (gramática.tipo == "símbolo") = dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática })
    | (gramática.tipo == "sequência" & dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).sucesso == 1 & dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).pos == entrada[.]) = {
      sucesso: 1
      valor: dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).valor
    }
    | (gramática.tipo == "sequência") = dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática })
    | (gramática.tipo == "alternativa" & dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).sucesso == 1 & dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).pos == entrada[.]) = {
      sucesso: 1
      valor: dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).valor
    }
    | (gramática.tipo == "alternativa") = dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática })
    | (gramática.tipo == "opcional" & dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).sucesso == 1 & dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).pos == entrada[.]) = {
      sucesso: 1
      valor: dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).valor
    }
    | (gramática.tipo == "opcional") = {
      sucesso: 0
      pos: 0
    }
    | (gramática.tipo == "repetição" & dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).sucesso == 1 & dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).pos == entrada[.]) = {
      sucesso: 1
      valor: dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática }).valor
    }
    | (gramática.tipo == "repetição") = dialeto.analisar_de({ entrada: entrada pos: 0 gramática: gramática })
    | {
      sucesso: 0
    }
}

{
  analisar: dialeto.analisar
}